<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/payment/card.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Document</title>
    <script>
        window.addEventListener('beforeunload', function (e) {
            // Cancel the event
            e.preventDefault();
            // Chrome requires returnValue to be set
            e.returnValue = '';
        });
      </script>
</head>

<body>
    <div class="container p-0">
        <div class="card px-4">
            <p class="h8 py-3">Payment Details</p>
            <h5 style="text-align: center;">expiry time <span style="color: red;" id="timer"></span></h5>
            <h6>Transaction id <span><%= id%></span> </h6>

            
            <form id="card-form" action="/payment" method="post">
                <input type="hidden" name="transactionId" value="<%= id%>">

                <div class="row gx-3">
                    <div class="col-12">
                        <div class="d-flex flex-column">
                            <p class="text mb-1">Account Name</p>
                            <input class="form-control mb-3" type="text" placeholder="Name" name="Name" required>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="d-flex flex-column">
                            <p class="text mb-1">Account Number</p>
                            <input class="form-control mb-3" type="text" placeholder="1234 5678 435678"  required>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="d-flex flex-column">
                            <p class="text mb-1">IFSC CODE</p>
                            <input class="form-control mb-3" type="text" placeholder="1234" required>
                        </div>
                    </div>
                    <div class="col-6">
                        
                    </div>
                    <input type="hidden" name="id" value="<%=user._id%>">
                    <input type="hidden" value="<%= total %>" name="amount">
                    <input type="hidden" value="netBanking" name="type">
                    <input id="date" type="hidden" name="date">
                    <div class="col-12">
                        <button type="submit" id="btn" class="btn btn-primary mb-3">
                            <span class="ps-3">Pay RS <%= total %></span>
                            <span class="fas fa-arrow-right"></span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>



    <script>
        const date = document.getElementById("date")
        date.value = new Date();


        function startTimer(duration, display) {
            var timer = duration, minutes, seconds;
            setInterval(function () {
                minutes = parseInt(timer / 60, 10);
                seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;

                if (--timer < 0) {
                    timer = duration;
                }
            }, 1000);
        }

        window.onload = function () {
            var fiveMinutes = 5 * 60,
                display = document.querySelector('#timer');
            startTimer(fiveMinutes, display);
        };

       
    </script>
</body>

</html>